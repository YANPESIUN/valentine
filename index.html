<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will you be my Valentine?</title>

<style>
  * {
    box-sizing: border-box;
    font-family: system-ui, sans-serif;
  }

  body {
    margin: 0;
    height: 100vh;
    background: #f3b7c4;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .wrapper {
    position: relative;
    width: 100%;
    height: 100%;
  }

  /* КАРТИНКА */
  .valentine {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-height: 80vh;
    max-width: 90vw;
    pointer-events: none;
  }

  /* КНОПКИ */
  button {
    position: absolute;
    border: none;
    border-radius: 999px;
    padding: 14px 36px;
    font-size: 18px;
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
  }

  #yesBtn {
    background: linear-gradient(180deg, #ff4b7d, #ff2f66);
    color: white;
    box-shadow: 0 8px 20px rgba(255, 47, 102, 0.4);
  }

  #noBtn {
    background: #ffffff;
    color: #444;
    box-shadow: 0 6px 14px rgba(0,0,0,0.15);
  }
</style>
</head>

<body>

<div class="wrapper" id="wrapper">
  <img src="valentine.png" class="valentine" id="img">

  <button id="yesBtn">Yes</button>
  <button id="noBtn">No</button>
</div>

<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const img = document.getElementById("img");
const wrapper = document.getElementById("wrapper");

/* стартовое положение — ОДИН УРОВЕНЬ */
function placeInitial() {
  const imgRect = img.getBoundingClientRect();
  const centerY = imgRect.bottom + 20;

  yesBtn.style.left = (window.innerWidth / 2 - yesBtn.offsetWidth - 20) + "px";
  yesBtn.style.top = centerY + "px";

  noBtn.style.left = (window.innerWidth / 2 + 20) + "px";
  noBtn.style.top = centerY + "px";
}

function jumpNo() {
  const imgRect = img.getBoundingClientRect();
  const btnRect = noBtn.getBoundingClientRect();

  const padding = 24;      // отступ от картинки
  const radius = 160;      // максимальная дальность прыжка

  // выбираем сторону вокруг картинки
  const side = Math.floor(Math.random() * 4);

  let x, y;

  switch (side) {
    case 0: // сверху
      x = imgRect.left + Math.random() * imgRect.width;
      y = imgRect.top - btnRect.height - padding - Math.random() * radius;
      break;

    case 1: // снизу
      x = imgRect.left + Math.random() * imgRect.width;
      y = imgRect.bottom + padding + Math.random() * radius;
      break;

    case 2: // слева
      x = imgRect.left - btnRect.width - padding - Math.random() * radius;
      y = imgRect.top + Math.random() * imgRect.height;
      break;

    case 3: // справа
      x = imgRect.right + padding + Math.random() * radius;
      y = imgRect.top + Math.random() * imgRect.height;
      break;
  }

  // защита от ухода за экран
  x = Math.max(10, Math.min(x, window.innerWidth - btnRect.width - 10));
  y = Math.max(10, Math.min(y, window.innerHeight - btnRect.height - 10));

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}


/* ТОЛЬКО ПРИ НАВЕДЕНИИ */
noBtn.addEventListener("mouseenter", jumpNo);
noBtn.addEventListener("touchstart", e => {
  e.preventDefault();
  jumpNo();
});

yesBtn.onclick = () => {
  window.location.href = "success.html";
};

window.onload = placeInitial;
window.onresize = placeInitial;
</script>

</body>
</html>
